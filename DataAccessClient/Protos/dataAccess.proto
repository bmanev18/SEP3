syntax = "proto3";

option java_package = "com.protobuf";
option csharp_namespace = "DataAccessClient";

service UserAccess {
    rpc CreateUser (UserCreationDto) returns (Response);
    rpc UsersByRole (Role) returns (FilteredUsersResponse);
    rpc UserByUsername (Username) returns (UserCreationDto);
    rpc UpdateUser (UserCreationDto) returns (UpdatedUserResponse);
    rpc DeleteUser (Username) returns (Response);
    rpc GetPassword (Username) returns (Password);
}


service ProjectAccess {
    rpc CreateProject (ProjectCreationDto) returns (ResponseWithID);
    rpc AddCollaborator (AddToProjectDto) returns (Response);
    rpc AddUserStory (UserStoryMessage) returns (ResponseWithID);
    rpc GetAllProjects (Username) returns (ProjectsResponse);
    rpc GetProductBacklog (Id) returns (ProductBacklogResponse);
}


message UserCreationDto {
    string username = 1;
    string firstName = 2;
    string lastName = 3;
    string password = 4;
    string role = 5;
}
message Id {
    int32 id = 1;
}

message Response {
    int32 code = 1;
}

message ResponseWithID {
    int32 code = 1;
    int32 id = 2;
}
message Role {
    string roleName = 1;
}

message UserSearchDto {
    string firstName = 1;
    string lastName = 2;
    string username = 3;
}

message FilteredUsersResponse {
    repeated UserSearchDto users = 1;
    int32 code = 2;
}

message UpdatedUserResponse {
    UserCreationDto user = 1;
    int32 code = 2;
}

message Username {
    string username = 1;
}

message AddToProjectDto {
    string username = 1;
    int32 projectId = 2;
}






//ProjectService
message ProjectCreationDto {
    string ownerUsername = 1;
    string title = 2;
}
message Password {
    string password = 1;
}
message UserStoryMessage {
    string taskBody = 1;
    string priority = 2;
    int32 project_id = 3;
}
message ProjectMessage {
    int32 id = 1;
    string title = 2;
}
message ProjectsResponse {
    repeated ProjectMessage projects = 1;
    int32 code = 2;
}
message UserStory {
    int32 id = 1;
    int32 project_id = 2;
    string userStory = 3;
    string priority = 4;
}
message ProductBacklogResponse {
    repeated UserStory userStories = 1;
    int32 code = 2;
}
